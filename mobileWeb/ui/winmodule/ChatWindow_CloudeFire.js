function ChatWindow(){var c=require("com.infinery.cdk").create("b9251ccb-b522-4457-9519-5e699d9d27e8");c.register({connected:function(){c.write("info","connected from Taipei");c.addEventListener("update","apple",{secure:!1},function(a){a=JSON.stringify(a);alert("updates are available: "+a);b.recieveMessage(a)})}});var e=require("ti.smsview"),f=Ti.UI.createButtonBar({labels:["Recieve","Empty","Get All","Disable","Enable"],height:30,style:Ti.UI.iPhone.SystemButtonStyle.BAR});Ti.UI.createView().add(f);
var d=Ti.UI.createWindow({orientationModes:[1,2,3,4]}),b=e.createView({backgroundColor:"#dae1eb",returnType:e.RETURNKEY_DONE,camButton:!0,hasTab:!0});d.add(b);f.addEventListener("click",function(a){switch(a.index){case 0:b.recieveMessage("Hello World!");break;case 1:b.empty();break;case 2:Ti.API.info(b.getAllMessages());break;case 3:b.sendButtonDisabled=!0;break;case 4:b.sendButtonDisabled=!1}});b.addEventListener("click",function(a){a.scrollView&&b.blur();Ti.API.info("Clicked on the scrollview")});
b.addEventListener("buttonClicked",function(a){b.addLabel(new Date+"");b.sendMessage(a.value);c.fire("update","apple",{secure:!1,maxSubscribers:10},{msgtext:"Hello World"})});b.addEventListener("camButtonClicked",function(){var a=Ti.UI.createOptionDialog({options:["Photo Gallery","Cancel"],cancel:1,title:"Send a photo"});a.show();a.addEventListener("click",function(a){0==a.index&&Titanium.Media.openPhotoGallery({success:function(a){var c=Ti.UI.createImageView({image:a.media});c.width=100;c.height=
100/a.media.width*a.media.height;b.sendMessage(c.toBlob())},mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]})})});b.addEventListener("change",function(a){Ti.API.info(a.value)});b.addEventListener("messageClicked",function(a){a.text&&Ti.API.info("Text: "+a.text);a.image&&Ti.API.info("Image: "+a.image);Ti.API.info("Index: "+a.index)});d.navBarHidden=!0;return d}module.exports=ChatWindow;